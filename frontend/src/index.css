@import "tailwindcss";

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
  /* Typography + radii */
  --font-sans: "Segoe UI", "Inter", sans-serif;
  --radius-card: 0.75rem;
  --radius-button: 0.625rem;
  --radius-pill: 9999px;

  /* Light theme-neutral scale (used by existing gray/slate utility classes) */
  --color-gray-50: oklch(0.98 0.004 255);
  --color-gray-100: oklch(0.96 0.007 255);
  --color-gray-200: oklch(0.92 0.01 255);
  --color-gray-300: oklch(0.86 0.012 255);
  --color-gray-400: oklch(0.74 0.014 255);
  --color-gray-500: oklch(0.62 0.014 255);
  --color-gray-600: oklch(0.5 0.016 255);
  --color-gray-700: oklch(0.4 0.018 255);
  --color-gray-800: oklch(0.33 0.019 255);
  --color-gray-900: oklch(0.28 0.02 255);

  --color-slate-50: var(--color-gray-50);
  --color-slate-100: var(--color-gray-100);
  --color-slate-200: var(--color-gray-200);
  --color-slate-300: var(--color-gray-300);
  --color-slate-400: var(--color-gray-400);
  --color-slate-500: var(--color-gray-500);
  --color-slate-600: var(--color-gray-600);
  --color-slate-700: var(--color-gray-700);
  --color-slate-800: var(--color-gray-800);
  --color-slate-900: var(--color-gray-900);

  /* Brand scale */
  --color-blue-50: oklch(0.97 0.015 245);
  --color-blue-100: oklch(0.94 0.03 245);
  --color-blue-200: oklch(0.89 0.05 245);
  --color-blue-300: oklch(0.82 0.08 245);
  --color-blue-400: oklch(0.74 0.11 245);
  --color-blue-500: oklch(0.66 0.14 247);
  --color-blue-600: oklch(0.58 0.16 250);
  --color-blue-700: oklch(0.5 0.15 252);

  /* Semantic app tokens */
  --color-surface-page: var(--color-gray-50);
  --color-surface-card: oklch(1 0 0);
  --color-surface-muted: var(--color-gray-100);
  --color-text-primary: var(--color-gray-900);
  --color-text-secondary: var(--color-gray-600);
  --color-text-muted: var(--color-gray-500);
  --color-border-subtle: var(--color-gray-200);
  --color-border-strong: var(--color-gray-300);

  --color-action-primary-bg: var(--color-blue-600);
  --color-action-primary-fg: oklch(1 0 0);
  --color-action-secondary-bg: oklch(1 0 0);
  --color-action-secondary-fg: var(--color-gray-700);
  --color-action-secondary-border: var(--color-gray-300);
  --color-action-danger-bg: oklch(0.58 0.2 25);
  --color-action-danger-fg: oklch(1 0 0);

  --color-status-running: oklch(0.6 0.15 230);
  --color-status-paused: oklch(0.72 0.14 95);
  --color-status-completed: oklch(0.65 0.15 145);
  --color-status-failed: oklch(0.55 0.2 25);
  --color-status-inactive-bg: var(--color-gray-100);
  --color-status-inactive-fg: var(--color-gray-700);

  --color-badge-primary-bg: oklch(0.93 0.05 252);
  --color-badge-primary-fg: oklch(0.44 0.14 252);
  --color-badge-success-bg: oklch(0.94 0.06 150);
  --color-badge-success-fg: oklch(0.42 0.12 150);
  --color-badge-warning-bg: oklch(0.95 0.07 95);
  --color-badge-warning-fg: oklch(0.45 0.1 95);
  --color-badge-error-bg: oklch(0.94 0.07 25);
  --color-badge-error-fg: oklch(0.45 0.15 25);
  --color-badge-info-bg: oklch(0.94 0.05 220);
  --color-badge-info-fg: oklch(0.44 0.1 220);

  --color-toast-success-bg: oklch(0.95 0.05 150);
  --color-toast-success-border: oklch(0.86 0.08 150);
  --color-toast-success-fg: oklch(0.4 0.11 150);
  --color-toast-error-bg: oklch(0.95 0.06 25);
  --color-toast-error-border: oklch(0.86 0.1 25);
  --color-toast-error-fg: oklch(0.41 0.16 25);
  --color-toast-warning-bg: oklch(0.96 0.06 95);
  --color-toast-warning-border: oklch(0.88 0.08 95);
  --color-toast-warning-fg: oklch(0.43 0.1 95);
  --color-toast-info-bg: oklch(0.95 0.04 230);
  --color-toast-info-border: oklch(0.87 0.06 230);
  --color-toast-info-fg: oklch(0.41 0.1 230);

  --color-phase-crawling: oklch(0.6 0.15 230);
  --color-phase-cleaning: oklch(0.58 0.18 270);
  --color-phase-embedding: oklch(0.6 0.2 300);
  --color-phase-indexing: oklch(0.62 0.18 330);

  --color-focus-ring: oklch(0.7 0.08 250);
  --shadow-card: 0 6px 22px color-mix(in oklch, var(--color-text-primary) 10%, transparent);

  /* Semantic aliases for utility usage in markup */
  --color-surface: var(--color-surface-page);
  --color-card: var(--color-surface-card);
  --color-muted: var(--color-surface-muted);
  --color-foreground: var(--color-text-primary);
  --color-secondary: var(--color-text-secondary);
  --color-dim: var(--color-text-muted);
  --color-border: var(--color-border-subtle);
  --color-border-stronger: var(--color-border-strong);
  --color-brand: var(--color-blue-600);
  --color-brand-strong: var(--color-blue-700);
  --color-brand-soft: var(--color-blue-50);
  --color-brand-line: var(--color-blue-200);
  --color-accent-primary: var(--color-brand);
  --color-accent-dark: var(--color-brand-strong);

  --color-success: var(--color-status-completed);
  --color-success-strong: color-mix(in oklch, var(--color-success) 85%, black);
  --color-success-soft: oklch(0.95 0.05 150);
  --color-success-line: oklch(0.88 0.07 150);

  --color-warning: var(--color-status-paused);
  --color-warning-strong: color-mix(in oklch, var(--color-warning) 82%, black);
  --color-warning-soft: oklch(0.96 0.06 95);
  --color-warning-line: oklch(0.89 0.08 95);

  --color-danger: var(--color-status-failed);
  --color-danger-strong: color-mix(in oklch, var(--color-danger) 82%, black);
  --color-danger-soft: oklch(0.95 0.06 25);
  --color-danger-line: oklch(0.88 0.09 25);

  --color-info: var(--color-status-running);
  --color-info-strong: color-mix(in oklch, var(--color-info) 80%, black);
  --color-info-soft: oklch(0.95 0.05 230);
  --color-info-line: oklch(0.88 0.07 230);

  --color-accent: oklch(0.6 0.14 290);
  --color-accent-strong: color-mix(in oklch, var(--color-accent) 82%, black);
  --color-accent-soft: oklch(0.95 0.04 290);
  --color-accent-line: oklch(0.88 0.06 290);

  --color-inverse: oklch(1 0 0);
  --color-overlay: oklch(0 0 0);

  --color-code-bg: oklch(0.23 0.01 255);
  --color-code-bg-hover: oklch(0.3 0.012 255);
  --color-code-fg: oklch(0.97 0.003 255);
}

@layer base {
  :root,
  [data-theme="light"] {
    color-scheme: light;
  }

  [data-theme="dark"] {
    color-scheme: dark;

    /* Invert utility color intent for existing classnames */
    --color-gray-50: oklch(0.2 0.008 255);
    --color-gray-100: oklch(0.24 0.009 255);
    --color-gray-200: oklch(0.29 0.01 255);
    --color-gray-300: oklch(0.36 0.011 255);
    --color-gray-400: oklch(0.5 0.013 255);
    --color-gray-500: oklch(0.63 0.014 255);
    --color-gray-600: oklch(0.73 0.013 255);
    --color-gray-700: oklch(0.82 0.012 255);
    --color-gray-800: oklch(0.9 0.01 255);
    --color-gray-900: oklch(0.96 0.006 255);

    --color-slate-50: var(--color-gray-50);
    --color-slate-100: var(--color-gray-100);
    --color-slate-200: var(--color-gray-200);
    --color-slate-300: var(--color-gray-300);
    --color-slate-400: var(--color-gray-400);
    --color-slate-500: var(--color-gray-500);
    --color-slate-600: var(--color-gray-600);
    --color-slate-700: var(--color-gray-700);
    --color-slate-800: var(--color-gray-800);
    --color-slate-900: var(--color-gray-900);

    --color-blue-50: oklch(0.28 0.03 250);
    --color-blue-100: oklch(0.34 0.05 250);
    --color-blue-200: oklch(0.42 0.08 250);
    --color-blue-300: oklch(0.51 0.11 250);
    --color-blue-400: oklch(0.61 0.13 250);
    --color-blue-500: oklch(0.7 0.14 250);
    --color-blue-600: oklch(0.77 0.13 248);
    --color-blue-700: oklch(0.84 0.11 246);

    --color-surface-page: var(--color-gray-50);
    --color-surface-card: var(--color-gray-100);
    --color-surface-muted: var(--color-gray-200);
    --color-text-primary: var(--color-gray-900);
    --color-text-secondary: var(--color-gray-700);
    --color-text-muted: var(--color-gray-600);
    --color-border-subtle: var(--color-gray-300);
    --color-border-strong: var(--color-gray-400);
    --color-action-secondary-bg: var(--color-gray-200);
    --color-action-secondary-fg: var(--color-gray-900);
    --color-action-secondary-border: var(--color-gray-400);
    --color-status-inactive-bg: var(--color-gray-300);
    --color-status-inactive-fg: var(--color-gray-800);
    --shadow-card: 0 10px 28px color-mix(in oklch, black 30%, transparent);
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: var(--color-surface-page);
    color: var(--color-text-primary);
  }
}

.ui-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: 600;
  border: 1px solid transparent;
  cursor: pointer;
  transition:
    background-color 150ms ease,
    border-color 150ms ease,
    color 150ms ease,
    opacity 150ms ease;
}

.ui-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in oklch, var(--color-focus-ring) 55%, transparent);
}

.ui-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.ui-btn--sm {
  font-size: 0.875rem;
  padding: 0.375rem 0.75rem;
}

.ui-btn--md {
  font-size: 0.9375rem;
  padding: 0.5rem 1rem;
}

.ui-btn--lg {
  font-size: 1rem;
  padding: 0.75rem 1.5rem;
}

.ui-btn--primary {
  background: var(--color-action-primary-bg);
  color: var(--color-action-primary-fg);
  border-color: color-mix(in oklch, var(--color-action-primary-bg) 80%, black);
}

.ui-btn--primary:hover:not(:disabled) {
  background: color-mix(in oklch, var(--color-action-primary-bg) 88%, black);
}

.ui-btn--secondary {
  background: var(--color-action-secondary-bg);
  color: var(--color-action-secondary-fg);
  border-color: var(--color-action-secondary-border);
}

.ui-btn--secondary:hover:not(:disabled) {
  background: color-mix(in oklch, var(--color-action-secondary-bg) 93%, var(--color-surface-muted));
  border-color: var(--color-border-strong);
}

.ui-btn--success {
  background: var(--color-status-completed);
  color: var(--color-action-primary-fg);
  border-color: color-mix(in oklch, var(--color-status-completed) 82%, black);
}

.ui-btn--success:hover:not(:disabled) {
  background: color-mix(in oklch, var(--color-status-completed) 88%, black);
}

.ui-btn--warning {
  background: var(--color-status-paused);
  color: var(--color-text-primary);
  border-color: color-mix(in oklch, var(--color-status-paused) 82%, black);
}

.ui-btn--warning:hover:not(:disabled) {
  background: color-mix(in oklch, var(--color-status-paused) 88%, black);
}

.ui-btn--danger {
  background: var(--color-action-danger-bg);
  color: var(--color-action-danger-fg);
  border-color: color-mix(in oklch, var(--color-action-danger-bg) 82%, black);
}

.ui-btn--danger:hover:not(:disabled) {
  background: color-mix(in oklch, var(--color-action-danger-bg) 88%, black);
}

.ui-btn--ghost {
  background: transparent;
  color: var(--color-text-secondary);
  border-color: transparent;
}

.ui-btn--ghost:hover:not(:disabled) {
  background: var(--color-surface-muted);
  color: var(--color-text-primary);
}

.ui-card {
  background: var(--color-surface-card);
  border-radius: var(--radius-card);
  border: 1px solid var(--color-border-subtle);
  box-shadow: var(--shadow-card);
}

.ui-card--interactive {
  transition: box-shadow 150ms ease;
  cursor: pointer;
}

.ui-card--interactive:hover {
  box-shadow: 0 10px 26px color-mix(in oklch, var(--color-text-primary) 13%, transparent);
}

.ui-card-header {
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--color-border-subtle);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.ui-card-content {
  padding: 1rem 1.5rem;
}

.ui-card-title {
  font-size: 1.125rem;
  line-height: 1.6rem;
  font-weight: 700;
  color: var(--color-text-primary);
}

.ui-badge {
  display: inline-flex;
  align-items: center;
  border-radius: var(--radius-pill);
  font-weight: 600;
}

.ui-badge--sm {
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
}

.ui-badge--md {
  font-size: 0.75rem;
  padding: 0.25rem 0.625rem;
}

.ui-badge--lg {
  font-size: 0.875rem;
  padding: 0.35rem 0.75rem;
}

.ui-badge--default {
  background: var(--color-surface-muted);
  color: var(--color-text-secondary);
}

.ui-badge--primary {
  background: var(--color-badge-primary-bg);
  color: var(--color-badge-primary-fg);
}

.ui-badge--success {
  background: var(--color-badge-success-bg);
  color: var(--color-badge-success-fg);
}

.ui-badge--warning {
  background: var(--color-badge-warning-bg);
  color: var(--color-badge-warning-fg);
}

.ui-badge--error {
  background: var(--color-badge-error-bg);
  color: var(--color-badge-error-fg);
}

.ui-badge--info {
  background: var(--color-badge-info-bg);
  color: var(--color-badge-info-fg);
}

.status-badge {
  display: inline-flex;
  align-items: center;
  border-radius: var(--radius-pill);
  font-size: 0.8125rem;
  font-weight: 600;
  line-height: 1;
  padding: 0.375rem 0.75rem;
}

.ui-status-running {
  background: var(--color-status-running);
  color: var(--color-action-primary-fg);
}

.ui-status-paused {
  background: var(--color-status-paused);
  color: var(--color-text-primary);
}

.ui-status-completed {
  background: var(--color-status-completed);
  color: var(--color-action-primary-fg);
}

.ui-status-failed {
  background: var(--color-status-failed);
  color: var(--color-action-primary-fg);
}

.ui-status-active {
  background: var(--color-status-completed);
  color: var(--color-action-primary-fg);
}

.ui-status-inactive {
  background: var(--color-status-inactive-bg);
  color: var(--color-status-inactive-fg);
}

.ui-toast {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
  border-radius: var(--radius-button);
  border: 1px solid;
  box-shadow: var(--shadow-card);
}

.ui-toast-success {
  background: var(--color-toast-success-bg);
  border-color: var(--color-toast-success-border);
  color: var(--color-toast-success-fg);
}

.ui-toast-error {
  background: var(--color-toast-error-bg);
  border-color: var(--color-toast-error-border);
  color: var(--color-toast-error-fg);
}

.ui-toast-warning {
  background: var(--color-toast-warning-bg);
  border-color: var(--color-toast-warning-border);
  color: var(--color-toast-warning-fg);
}

.ui-toast-info {
  background: var(--color-toast-info-bg);
  border-color: var(--color-toast-info-border);
  color: var(--color-toast-info-fg);
}

.ui-loading-indicator {
  border-radius: var(--radius-card);
  background: var(--color-surface-muted);
  padding: 0.75rem 1rem;
}

.ui-loading-dot {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: var(--radius-pill);
  background: var(--color-text-muted);
  animation: bounce 1s infinite;
}

.ui-header-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ui-header-actions > .ui-btn .label {
  display: none;
}

@media (min-width: 640px) {
  .ui-header-actions > .ui-btn .label {
    display: inline;
  }
}

@keyframes slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@utility animate-slide-in {
  animation: slide-in 0.3s ease-out;
}

@utility animation-delay-0 {
  animation-delay: 0ms;
}

@utility animation-delay-150 {
  animation-delay: 150ms;
}

@utility animation-delay-300 {
  animation-delay: 300ms;
}

@utility panel-scroll {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

.panel-scroll::-webkit-scrollbar {
  width: 6px;
}

.panel-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.panel-scroll::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 9999px;
}

.panel-scroll-scope:hover .panel-scroll,
.panel-scroll-scope:focus-within .panel-scroll {
  scrollbar-color: color-mix(in oklch, var(--color-text-muted) 65%, transparent) transparent;
}

.panel-scroll-scope:hover .panel-scroll::-webkit-scrollbar-thumb,
.panel-scroll-scope:focus-within .panel-scroll::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklch, var(--color-text-muted) 65%, transparent);
}
